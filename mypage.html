<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TALKTALK</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://kit.fontawesome.com/9d9d67d672.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="CSS/style_mypage.css">
    <script defer src="js/ie.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Roboto&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Anton&family=Roboto&display=swap');
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 로그인 상태 확인
            if (localStorage.getItem('email')) {
                // 로그인 상태라면 "My Page" 버튼 표시
                const signinElement = document.querySelector('.signin');
                if (signinElement) {
                    const myPageElement = document.createElement('a');
                    myPageElement.href = 'mypage.html';
                    myPageElement.className = 'mypage';
                    myPageElement.textContent = 'My Page';
                    signinElement.parentNode.replaceChild(myPageElement, signinElement);
                }
            }

            // 사용자 정보 로드
            const email = localStorage.getItem('email');
            const username = localStorage.getItem('username');
            const profilePic = localStorage.getItem('profilePic'); // 프로필 사진 URL을 localStorage에서 가져옴

            // 페이지에 사용자 정보 표시
            document.getElementById('userEmail').textContent = email;
            document.getElementById('userName').textContent = username;
            if (profilePic) {
                document.getElementById('profileImage').src = profilePic;
            }

            // 로그아웃 버튼 클릭 이벤트
            document.getElementById('logoutButton').addEventListener('click', function() {
                localStorage.removeItem('email');
                localStorage.removeItem('username');
                localStorage.removeItem('password');
                localStorage.removeItem('profilePic');
                window.location.href = 'main.html'; // 로그아웃 후 메인 페이지로 리디렉션
            });
        });
    </script>
</head>
<body>
    <header>
        <nav class="main_menu">
            <h1>
                <a href="./main.html">TALKTALK</a>
            </h1>
            <ul id="gnb">
                <li><a href="./main.html" id="home">Home</a></li>
                <li class="dropdown">
                    <a href="./main.html" id="arts">Study</a>
                    <ul class="dropdown-content">
                        <li><a href="./study.html?lang=english">English</a></li>
                        <li><a href="./study.html?lang=chinese">Chinese</a></li>
                        <li><a href="./study.html?lang=japanese">Japanese</a></li>
                        <li><a href="./study.html?lang=spanish">Spanish</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="./community_free.html" id="com">Community</a>
                    <ul class="dropdown-content">
                        <li><a href="./community_free.html">자유게시판</a></li>
                        <li><a href="./book_sale.html">책 사고팔기</a></li>
                        <li><a href="./study_recruit.html">스터디 모집</a></li>
                    </ul>
                </li>
                <li><a href="./about.html" id="about">About Us</a></li>
                <li><a href="./login_sign.html" id="prof" class="signin">Sign In</a></li>
            </ul>
        </nav>
    </header>

    <div class="header-content-profile">
        <div class="text-content">
            <br>
            <h1>My Page</h1>
        </div>
    </div>

    <div class="main-content">
        <div class="profile-section">
            <img id="profileImage" src="img/profile.png" alt="Profile Image">
            <h2 id="userName"></h2>
            <p><strong>Email:</strong> <span id="userEmail"></span></p>
            <button id="logoutButton">로그아웃</button>
        </div>
        <div class="posts-section">
            <h2>내가 쓴 글</h2>
            <table class="posts-table">
                <thead>
                    <tr>
                        <th>번호</th>
                        <th>제목</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>sample data1</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>sample data2</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>sample data3</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>sample data4</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>sample data5</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>sample data6</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>  

    <div class="footer">
        <p>운영시간: 월 ~ 금 AM 9:00 ~ PM 7:00 | 점심시간: PM12:00 ~ PM 1:00</p>
        <p>고객센터: AM 10:00 ~ PM 6:00 | 전화번호: 02 123-9876</p>
        <p>Copyright © 2024 TalkTalk All Rights Reserved</p>
    </div>
</body>
</html>
